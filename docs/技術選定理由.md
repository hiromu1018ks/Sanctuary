# SNSアプリ「Sanctuary」技術選定理由書

## 1. はじめに

本ドキュメントは、SNSアプリ「Sanctuary」の開発において採用した技術スタックとその選定理由を詳細に説明するものです。本アプリは、個人開発プロジェクトとして、限られたリソースの中で最大限の品質と機能を実現することを目指しました。特に、転職活動におけるポートフォリオとして、技術的な深掘り、モダンな開発手法、そして将来性への配慮をアピールできるよう、各技術の選定理由を明確に記述します。

## 2. 全体方針

技術選定にあたり、以下の4つの主要な方針を掲げました。

1.  **既存知識の活用と効率化**: TypeScript経験を活かしてTypeScriptを採用し、学習コストを抑えつつ高生産性を実現します。
2.  **エンタープライズ実践技術の習得**: 実業務で広く使用される技術スタック（Hono、Prisma等）を採用し、実践的なスキルを身につけます。
3.  **技術的独立性の確保**: ベンダーロックインを避け、完全な制御権を持つ自作システムの構築により、システム全体の理解を深めます。
4.  **スケーラビリティと堅牢性への配慮**: MVP（Minimum Viable Product）段階から、将来的なユーザー増加や機能拡張を見据えた設計を意識し、堅牢なシステム基盤を構築します。

## 3. 各技術要素の選定理由

### 3.1. フロントエンド

#### Next.js (TypeScriptを含む)

*   **選定理由**:
    *   **開発体験の向上**: ファイルベースルーティング、API Routes、Fast Refreshなど、開発者が快適に開発を進められる機能が豊富です。
    *   **SSR/SSGによるパフォーマンスとSEO**: サーバーサイドレンダリング（SSR）や静的サイト生成（SSG）を容易に導入でき、初期表示速度の向上とSEO対策に貢献します。SNSアプリのタイムライン表示において、ユーザー体験を向上させる上で重要です。
    *   **RESTful API連携の最適化**: Java Spring Boot APIとの連携において、型安全なHTTP通信とエラーハンドリングを実現できます。
    *   **TypeScriptによる型安全性**: 大規模なアプリケーション開発において、型による恩恵は大きく、開発中のエラーを早期に発見し、コードの品質と保守性を高めます。

#### Tailwind CSS

*   **選定理由**:
    *   **開発速度の向上**: 事前定義されたユーティリティクラスをHTMLに直接記述することで、CSSファイルを記述する手間を省き、高速なUI開発が可能です。
    *   **デザインの一貫性**: ユーティリティクラスの組み合わせにより、デザインシステムを容易に構築でき、アプリ全体で一貫したデザインを保てます。
    *   **保守性の高さ**: コンポーネントごとにスタイルが完結するため、スタイルの変更が他の部分に影響を与えるリスクが低減されます。
    *   **学習コストの低さ**: CSSの知識があればすぐに習得でき、複雑なCSSフレームワークの学習は不要です。

#### Shadcn/ui

*   **選定理由**:
    *   **高品質なコンポーネント**: アクセシビリティやデザインに配慮された、モダンで洗練されたUIコンポーネントを提供します。
    *   **カスタマイズの容易さ**: コンポーネントのコードを直接プロジェクトに取り込む（コピペ）形式のため、完全に制御可能であり、Tailwind CSSと組み合わせて柔軟なカスタマイズが可能です。
    *   **依存関係の管理**: ライブラリとしてインストールするのではなく、必要なコンポーネントのみをプロジェクトに組み込むため、不要な依存関係を減らし、バンドルサイズを最適化できます。

### 3.2. バックエンド・データベース・認証

#### Hono + TypeScript

*   **選定理由**:
    *   **TypeScript経験の活用**: 既存のTypeScript知識を最大限活用でき、学習コストを大幅に削減しながら高生産性を実現できます。
    *   **高速性と軽量性**: Honoは非常に高速で軽量なWebフレームワークであり、エッジ環境でのデプロイに最適です。
    *   **Node.jsエコシステムの活用**: Node.jsの豊富なライブラリとツールチェーンを活用でき、開発効率と信頼性を両立できます。
    *   **JWTによる堅牢な認証**: JWT認証をHonoミドルウェアとして安全に実装できます。

#### PostgreSQL (Docker環境)

*   **選定理由**:
    *   **既存スキーマの継承**: Docker PostgreSQL環境により、既存のデータベース設計を活用しつつ、開発環境の統一を図れます。
    *   **リレーショナルデータベースの標準**: PostgreSQLは業界標準のRDBMSであり、実業務での使用頻度が高く、実践的なSQL技術を習得できます。
    *   **Spring Data JPAとの親和性**: Hibernateを基盤とするJPAとの組み合わせにより、O/Rマッピングのベストプラクティスを学べます。
    *   **Docker化による環境統一**: コンテナ化により、開発環境の構築・共有が容易になり、本番環境との差異を最小化できます。

#### Prisma

*   **選定理由**:
    *   **型安全性と開発体験**: TypeScriptとの親和性が高く、自動生成されるPrisma Clientにより、データベース操作が型安全に行え、開発体験が向上します。
    *   **生産性の向上**: 直感的なAPIとマイグレーションツールにより、データベーススキーマの管理と操作が容易になります。
    *   **既存スキーマの継承**: 既存のPostgreSQLスキーマをPrismaでインポートし、活用できます。
    *   **パフォーマンス**: 効率的なクエリ生成と接続プール管理により、高いパフォーマンスを発揮します。

### 3.3. インフラ・デプロイ

#### Vercel (フロントエンド)

*   **選定理由**:
    *   **Next.jsとの最高の親和性**: Next.jsの開発元であるVercelは、Next.jsアプリケーションのデプロイとホスティングに最適化されています。
    *   **自動デプロイとCI/CD**: GitHubリポジトリとの連携により、コードのプッシュをトリガーに自動でデプロイが実行され、開発からデプロイまでのサイクルが非常にスムーズです。
    *   **グローバルCDN**: コンテンツ配信ネットワーク（CDN）が組み込まれており、世界中のユーザーに高速でコンテンツを配信できます。

#### Cloudflare Workers / Vercel Edge Functions / Railway (バックエンド)

*   **選定理由**:
    *   **Honoアプリケーションのデプロイ最適化**: Honoはエッジ環境での動作に最適化されており、これらのプラットフォームで高速なデプロイと実行が可能です。
    *   **自動スケーリング**: トラフィック増加に応じた自動スケーリング機能により、運用負荷を軽減できます。
    *   **PostgreSQL統合**: マネージドPostgreSQLサービスとの統合により、データベース運用の負荷を削減できます。
    *   **環境変数管理**: アプリケーション設定の安全な管理と、環境ごとの設定分離が容易に実現できます。

### 3.4. AI連携 (将来的な拡張)

#### OpenAI GPT-4 API (Google Gemini Pro API, Anthropic Claude APIへのフォールバックも検討)

*   **選定理由**:
    *   **最先端のAI技術の活用**: 「Sanctuary」の核となる「AIによる投稿前レビュー・コーチング機能」を実現するために、自然言語処理能力に優れた大規模言語モデル（LLM）のAPIを活用します。GPT-4は現時点で最も高性能なモデルの一つであり、高品質な代替案生成が期待できます。
    *   **Honoでの外部API連携**: `fetch` APIやAxiosなどのHTTPクライアントを使用した外部API連携の実装経験は、マイクロサービス環境での開発能力を示します。
    *   **堅牢性への配慮**: 外部APIへの依存リスクを考慮し、将来的にGoogle Gemini ProやAnthropic Claudeなど、複数のLLM APIへのフォールバック戦略を検討することで、システムの可用性と信頼性を高める設計思想を示します。

### 3.5. 開発ワークフロー

#### GitHub

*   **選定理由**:
    *   **バージョン管理の標準**: ソースコードのバージョン管理システムとして業界標準であり、変更履歴の追跡、ブランチ戦略による機能開発、共同開発の基礎となります。
    *   **CI/CD連携**: Vercelなどのデプロイサービスとの連携が容易であり、自動テストや自動デプロイの基盤となります。
    *   **ポートフォリオとしての可視性**: 公開リポジトリとしてコードを公開することで、自身の開発プロセスやコード品質を直接アピールできます。

#### VS Code

*   **選定理由**:
    *   **TypeScript開発の最適化**: 軽量で高機能なエディタであり、TypeScript開発において最高の開発体験を提供します。
    *   **Hono統合**: Honoアプリケーションの開発、実行、デバッグが統合的に行え、開発効率を大幅に向上させます。
    *   **リファクタリング支援**: 強力なリファクタリング機能により、コード品質の継続的な改善が可能です。

#### npm / yarn

*   **選定理由**:
    *   **パッケージ管理の標準**: Node.jsプロジェクトにおけるパッケージ管理の標準であり、依存関係の解決と管理を効率的に行えます。
    *   **スクリプト実行の柔軟性**: `package.json` に定義されたスクリプトを実行することで、ビルド、テスト、開発サーバー起動などのタスクを自動化できます。

### 3.6. テスト

#### Jest + React Testing Library (フロントエンド)

*   **選定理由**:
    *   **ユニットテスト/コンポーネントテストの標準**: Reactアプリケーションのテストにおいてデファクトスタンダードであり、コンポーネントの振る舞いをユーザー視点でテストできます。
    *   **実務での必須スキル**: 多くの企業で採用されており、テストコードの記述能力は品質意識の高さと、バグを未然に防ぐ設計能力を示す重要なアピールポイントとなります。

#### Vitest / Jest (バックエンド)

*   **選定理由**:
    *   **TypeScriptネイティブテスト**: TypeScriptプロジェクトで広く使われているテストフレームワークであり、TypeScriptの言語特性を活かしたテストコードを記述できます。
    *   **Honoとの親和性**: Honoアプリケーションのテストを効率的に実行でき、実際のアプリケーション動作を検証できます。
    *   **エンタープライズ標準**: 業界標準のテストフレームワークであり、実業務で必要とされるテスト技術を習得できます。

#### Testcontainers

*   **選定理由**:
    *   **実際のデータベースを使用したテスト**: Dockerコンテナを使用した統合テストにより、実環境に近い条件でのテストが可能です。
    *   **テストの独立性**: 各テストが独立したデータベースインスタンスを使用するため、テスト間の干渉を完全に防げます。

#### Playwright (E2Eテスト)

*   **選定理由**:
    *   **エンドツーエンドテストの自動化**: ユーザーが実際にアプリケーションを操作するシナリオを自動化し、システム全体の結合テストとユーザー体験の検証を行います。
    *   **品質保証への意識**: E2Eテストまで含めたテスト戦略を理解し、実装できることは、総合的な品質保証能力を示します。

### 3.7. 状態管理

#### Zustand / Redux Toolkit

*   **選定理由**:
    *   **複雑な状態管理への対応**: アプリケーションの規模が拡大するにつれて、コンポーネント間の状態共有や非同期処理の管理が複雑になります。Zustandのような軽量なライブラリ、またはRedux Toolkitのような大規模開発で実績のあるライブラリを導入することで、これらの課題を効率的に解決できます。
    *   **状態管理能力のアピール**: 適切な状態管理ライブラリを選定し、使いこなせる能力は、より複雑なアプリケーション開発に対応できることを示します。

### 3.8. 監視・分析

#### Sentry (エラー監視)

*   **選定理由**:
    *   **フロントエンド・バックエンド統合監視**: Next.jsとSpring Boot両方でのエラー監視により、システム全体の健全性を把握できます。
    *   **リアルタイムエラー監視**: アプリケーションで発生するエラーをリアルタイムで検知し、詳細な情報（スタックトレース、ユーザー情報など）を収集できます。
    *   **運用意識のアピール**: 開発だけでなく、リリース後の運用フェーズにおける問題検知と解決への意識が高いことを示します。

#### Google Analytics (ユーザー行動分析)

*   **選定理由**:
    *   **ユーザー行動の可視化**: アプリケーションの利用状況（ページビュー、イベント、ユーザーフローなど）を分析し、ユーザー体験の改善や機能開発の意思決定に役立てます。
    *   **データに基づいた改善能力**: ユーザーの行動データを分析し、サービス改善に繋げる能力は、実務で非常に重要視されるスキルです。

### 3.9. CI/CD

#### GitHub Actions

*   **選定理由**:
    *   **開発プロセスの自動化**: コードのプッシュをトリガーに、自動テストの実行、Lintチェック、ビルド、デプロイといった一連のプロセスを自動化します。
    *   **TypeScript/Node.js対応**: npm/yarnコマンドやTypeScriptコンパイル、テスト実行を自動化し、品質ゲートを確実に通過させることができます。
    *   **効率的な開発と品質保証**: CI/CDパイプラインを構築することで、開発の効率化と品質の安定化を図り、モダンな開発プラクティスへの理解と実践能力を示します。

## 4. 技術選定の学習価値と実践効果

### 4.1 TypeScript経験を活かした効率的学習

*   **既存知識の最大活用**: TypeScript開発経験により、Honoの概念も理解しやすくなります。
*   **段階的な技術習得**: 完全に新しい技術スタックではなく、既存知識の延長として学習できるため、着実にスキルアップできます。

### 4.2 エンタープライズ技術の実践経験

*   **実業務との直結**: Hono、Prismaは多くの企業で採用されており、即戦力としてのアピールポイントになります。
*   **設計パターンの習得**: MVCアーキテクチャ、Repository パターン、Dependency Injectionなど、実務で重要な設計パターンを実践的に学べます。

### 4.3 技術的独立性の確保

*   **完全な制御権**: 自作APIにより、全てのビジネスロジックと認証・認可を完全に制御でき、システム全体の理解が深まります。
*   **デバッグ効率の向上**: 問題発生時の原因特定と解決が迅速に行え、開発効率を大幅に改善できます。
*   **ベンダーロックインの回避**: 特定のBaaSサービスに依存しない設計により、技術選択の自由度を保持できます。

## 5. まとめ

SNSアプリ「Sanctuary」の技術選定は、**既存のTypeScript知識を活かしつつ、エンタープライズで実用的な技術スタックを習得する**という明確な戦略に基づいています。

*   **Hono + TypeScript + PostgreSQL** の組み合わせは、実業務で広く採用されている技術スタックであり、即戦力としての技術力を示します.
*   **Next.js + Tailwind CSS + Shadcn/ui** は、モダンなフロントエンド開発のベストプラクティスを実践し、高品質なユーザー体験を提供します。
*   **Jest/Vitest + React Testing Library + Testcontainers** による包括的なテスト戦略は、品質保証への意識と技術力を示します。
*   **Docker + CI/CD** により、モダンな開発・運用プラクティスを実践し、DevOpsへの理解を示します。
*   **技術的独立性の確保**：完全に制御可能な自作システムにより、システム全体への深い理解と問題解決能力を獲得できます。

この技術スタックと実装経験は、「Sanctuary」が目指す「心の安全地帯」というコンセプトを技術的に支えるとともに、実業務で即戦力として活躍できる包括的なスキルセットを示すポートフォリオとして機能すると確信しています。