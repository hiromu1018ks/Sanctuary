# Sanctuary SNSアプリ - プロジェクト現況 (2025年1月)

## プロジェクト概要
- **プロジェクト名**: SNSアプリ "Sanctuary"
- **開発ブランチ**: develop (メインブランチ: main)
- **開発方針**: 学習重視の段階的開発アプローチ
- **ユーザーレベル**: 初心者向け実践学習

## 技術スタック
- **フロントエンド**: Next.js 15 + TypeScript + App Router
- **UIライブラリ**: Tailwind CSS v4 + Shadcn/ui
- **アイコン**: Lucide React (絵文字から置換済み)
- **認証**: NextAuth
- **バックエンド**: Hono + Prisma
- **データベース**: PostgreSQL
- **状態管理**: React Hooks

## 主要な完了済み改善

### フェーズ1: 絵文字→アイコン置換 (完了)
- 全UIコンポーネントで絵文字をLucide Reactアイコンに置換
- 認証機能の安定性確保
- API関連の絵文字も適切にテキスト表現に変更

### フェーズ2: 3カラムレイアウト (完了)
- レスポンシブ3カラムレイアウト実装
- **重要**: Tailwind v4設定問題を解決 (design-tokens.cssとの競合)
- Left Sidebar (3cols) + Main Content (6cols) + Right Sidebar (3cols)

### フェーズ3: サイドバーコンポーネント (完了)
- LeftSidebar: ナビゲーションメニュー実装
- RightSidebar: おすすめユーザー・トピック表示

### フェーズ4: UIコンポーネント高品質化 (完了)
- **PostCard**: グラデーション、ホバー効果、ソーシャルボタン(UI のみ)
- **PostForm**: 二重ローディング修正、成功メッセージ改善
- **Header**: グラデーション背景、アクセシビリティ向上
- **Card**: 黒い境界線→柔らかいグレーに変更

### モーダル改善 (完了)
- **BaseDialog**: 基本的な改善
- **SuggestionModal**: 元の動作状態を維持
- スキップリンク削除 (「メインコンテンツにスキップ」文字を除去)

## 重要な技術的発見・解決

### Tailwind v4 設定問題
- **問題**: design-tokens.css import と `@theme inline` ブロックが競合
- **解決**: globals.css を `@import "tailwindcss";` のみに簡素化
- **教訓**: Tailwind v4 では従来の設定方法と異なる

### 認証機能の安定性
- JSX構文エラーでログイン/ログアウトが動作不能になる問題を解決
- React アイコンの適切な配置方法を確立

### CSS変数の制限
- Tailwind v4 でのカスタムカラー定義が複雑
- 標準カラークラスの使用を推奨

## 今後の実装予定

### ユーザー学習用 (自己実装)
- **ソーシャル機能**: いいね・コメント・シェア機能
- **フォロー機能**: ユーザーフォロー/アンフォロー
- **ストーリー機能**: 時限的コンテンツ投稿
- **トピックフォロー**: 興味分野別コンテンツ購読
- **メディア投稿**: 画像・動画対応

### 延期中の改善
- **パステルカラーテーマ**: 色表示問題で一時延期
- **Noto Sans JPフォント**: フォント適用の改善

## ファイル構造 (重要)
```
src/
├── app/
│   ├── globals.css (Tailwind v4 設定)
│   └── ...
├── components/
│   ├── layout/
│   │   ├── Header.tsx (改善済み)
│   │   ├── ThreeColumnLayout.tsx (3カラム)
│   │   ├── LeftSidebar.tsx (改善済み)
│   │   └── RightSidebar.tsx (改善済み)
│   ├── post/
│   │   ├── PostCard.tsx (改善済み)
│   │   ├── PostForm.tsx (改善済み)
│   │   └── SuggestionModal.tsx (基本状態)
│   └── ui/ (Shadcn/ui コンポーネント)
└── ...
```

## 開発ワークフロー
1. **改善案→承認**: 実装前に改善計画を提示
2. **段階的実装**: 大きな変更は小さなステップに分割
3. **機能保持**: 既存動作を壊さない慎重な改修
4. **学習重視**: コード説明と実装理由の明確化

## 現在の状態
- 安定した3カラムレイアウトで動作
- 全UIコンポーネントが高品質化済み
- 認証機能は正常動作
- モーダルは基本状態で動作確認済み
- アクセシビリティ改善 (スキップリンク削除)

## 注意事項
- Tailwind v4 の制約でカスタムカラー定義は慎重に
- 絵文字使用は避け、Lucide React アイコンを使用
- コミット前は必ず動作確認
- 大きな変更前はコミット状態に戻せる準備をする